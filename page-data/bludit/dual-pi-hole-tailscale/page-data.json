{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/bludit/dual-pi-hole-tailscale",
    "result": {"data":{"allBluditPages":{"edges":[{"node":{"title":"Dual Pi-hole + Tailscale","content":"<p>This might be the perfect <a href=\"https://pi-hole.net/\">Pi-hole</a> setup!</p>\n<p>With this new setup I have redundancy for my DNS as well as the simplest VPN setup ever. Now when I am on the go not only can I access my home network with ease I am also able to take advantage of the ad blocking of <a href=\"https://pi-hole.net/\">Pi-hole</a>.</p>\n<p>Here are the basic steps to get things setup. There are more configuration steps available for each installation. Please check their websites for full details before proceeding.</p>\n<p><strong>Step 1:</strong></p>\n<p>Install <a href=\"https://pi-hole.net/\">Pi-hole</a> on two Raspberry Pis. </p>\n<pre><code>curl -sSL https://install.pi-hole.net | bash</code></pre>\n<p><strong>Step 2:</strong></p>\n<p>Install <a href=\"https://github.com/vmstan/gravity-sync\">Gravity Sync</a> on both Raspberry Pis.</p>\n<pre><code>curl -sSL https://gravity.vmstan.com | bash</code></pre>\n<p><strong>Step 3:</strong></p>\n<p>Run the first <a href=\"https://github.com/vmstan/gravity-sync\">Gravity Sync</a> from the Raspberry Pi that is fully configured with all your settings.</p>\n<pre><code>gravity-sync push</code></pre>\n<p><strong>Step 4:</strong></p>\n<p>Setup <a href=\"https://github.com/vmstan/gravity-sync\">Gravity Sync</a> automation on both Raspberry Pis.</p>\n<pre><code>gravity-sync auto</code></pre>\n<p><strong>Step 5:</strong></p>\n<p>Install <a href=\"https://tailscale.com/\">Tailscale</a> on both Raspberry Pis.</p>\n<pre><code>curl -fsSL https://tailscale.com/install.sh | sh</code></pre>\n<p><strong>Step 6:</strong></p>\n<p>Enable IPv6 forwarding on both Raspberry Pis.</p>\n<pre><code>echo 'net.ipv4.ip_forward = 1' | sudo tee -a /etc/sysctl.conf\necho 'net.ipv6.conf.all.forwarding = 1' | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p /etc/sysctl.conf</code></pre>\n<p><strong>Step 7:</strong></p>\n<p>Start <a href=\"https://tailscale.com/\">Tailscale</a> on both Raspberry Pis.</p>\n<pre><code>sudo tailscale up --advertise-exit-node --advertise-routes=192.168.1.0/24 --accept-dns=false</code></pre>\n<p><strong>Step 8:</strong></p>\n<p>Login to <a href=\"https://tailscale.com/\">Tailscale</a> and click the &quot;three dots&quot; menu next to the Machine entry for each <a href=\"https://pi-hole.net/\">Pi-hole</a>. Select &quot;Disable key expiry&quot; from the drop-down. Since the <a href=\"https://pi-hole.net/\">Pi-holes</a> are not directly exposed to the internet it is safe to not require re-authentication. Then select &quot;Edit route settings...&quot; from the same drop-down menu and enable both options. See image below.</p>\n<div class=\"centered\">\n    <img src=\"/bl-content/uploads/pages/b2824f25debdfd4c320c3717545b05c8/tailscale-setup.png\" class=\"image-border\" /><br><br>\n</div>\n<p>Next copy the <a href=\"https://tailscale.com/\">Tailscale</a> IP address for each <a href=\"https://pi-hole.net/\">Pi-hole</a> and use them as the Global Nameservers on the DNS tab. Set them override local DNS. See image below.</p>\n<div class=\"centered\">\n    <img src=\"/bl-content/uploads/pages/b2824f25debdfd4c320c3717545b05c8/tailscale-dns.png\" class=\"image-border\" /><br><br>\n</div>\n<p>Turn on MagicDNS on the DNS tab. This way the <a href=\"https://pi-hole.net/\">Pi-hole's</a> interfaces will work when on or off the Tailscale network using their hostnames.</p>\n<p><strong>Step 9:</strong></p>\n<p>Configure your router to use the <a href=\"https://pi-hole.net/\">Pi-hole's</a> local IP addresses for your DNS.</p>\n<p><strong>Step 10:</strong></p>\n<p>Install <a href=\"https://tailscale.com/\">Tailscale</a> on other devices such as your phone so you can connect to your <a href=\"https://tailscale.com/\">Tailscale</a> network.</p>\n<p>Thats it!</p>\n<p>Now you should have all your devices setup with ad blocking and VPN. Now when you are connected to your <a href=\"https://tailscale.com/\">Tailscale</a> network you will also get ad blocking even when you are not on your local network.</p>"}}]}},"pageContext":{"slug":"dual-pi-hole-tailscale"}},
    "staticQueryHashes": []}