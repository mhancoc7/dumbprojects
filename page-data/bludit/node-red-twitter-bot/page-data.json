{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/bludit/node-red-twitter-bot",
    "result": {"data":{"allBluditPages":{"edges":[{"node":{"title":"Node-Red Twitter Bot","content":"<p>I have setup a new <a href=\"https://nodered.org/\">Node-Red</a> Twitter Bot. This is powered by a <a href=\"https://deviwiki.com/wiki/RPF_Raspberry_Pi_4_Model_B_2GB\">Raspberry Pi 4 Model B (2GB)</a> that I have setup as the new Pi Lab Node Red Node.</p>\n<p>The <a href=\"https://nodered.org/\">Node-Red</a> flow was originally setup to provide a URL endpoint that accepts a minimal number of query parameters (e.g. hostname). The flow would then make http requests to the <a href=\"prometheus-grafana\">Pi Lab Metric's Node</a> that is powered by <a href=\"https://prometheus.io/\">Prometheus</a> to retrieve the metrics. The metrics were then formatted and pushed directly to the <a href=\"https://twitter.com/pilabdev\">Pi Lab Twitter feed</a>.</p>\n<p>I am now on version 4 of the flow. The latest iteration is completely self contained inside <a href=\"https://nodered.org/\">Node-Red</a>. The flow runs every 30 minutes and does <code>ping</code> checks to ensure that the nodes are online before gathering the metrics for each node and sending out tweets. This allows me to reduce the overhead for each of the nodes in the Pi Lab cluster and have things more centralized. </p>\n<p>I have also added an SMS alert node that, after a failed <code>ping</code> check,  sends an email that is then forwarded via text message to my mobile phone using this <a href=\"https://www.att.com/support/article/wireless/KM1061254/\">AT&amp;T feature</a>.</p>\n<p>Below is a screenshot of the flow.</p>\n<div class=\"centered\">\n    <img src=\"/bl-content/uploads/pages/b3c9f34aa0cb8225b2ce75d480025d36/pi-lab-node-red-twitter-bot-v6.png\" class=\"image-border\" /><br><br>\n</div>\n<p>I am very impressed with <a href=\"https://nodered.org/\">Node-Red</a>. I definitely recommend it for anyone who enjoys coding and automation.</p>\n<p><a href=\"https://github.com/node-red\"><img data-src=\"/images/check-it-out-on-github.png\" alt=\"Get it on GitHub\" class=\"on-github lozad\" /></a></p>\n<p><strong>Updates:</strong></p>\n<blockquote>\n<p><em>Thanks to some great feedback from <a href=\"https://www.reddit.com/r/nodered/comments/hetcu6/my_first_nodered_flow/\">r/nodered</a> I have re-factored the flow to use the <code>join</code> node so I can remove the use of flow variables. This should fix the issues I was seeing when a request to the flow would occur before the previous request had completed.  </em></p>\n<p><em>I have added a new flow that tweets the current <a href=\"/fold-for-covid\">BOINC Node</a> Rosetta@home stats. This flow is setup to be completely powered by <a href=\"https://nodered.org/\">Node-Red</a> and is run on a 30 minute interval.</em></p>\n<p><em>I have updated this blog post with the latest information on this project.</em></p>\n<p><em>I have added Node CPU temperature checks to alert me if a node has exceeded a configurable threshold.</em></p>\n<p><em>I have added a new flow that tweets the current average web stats from the <a href=\"https://statcounter.com/p12007932/summary/?account_id=324824&amp;login_id=1&amp;code=8be480ebcbd8fbe290785aac26c3ab68&amp;guest_login=1\">Pi Lab Statcounter account</a>.</em></p>\n<p><em>I have updated the flow to have better formatting of the message payload.</em></p>\n<p><em>I have added a new flow that tweets a JPEG snapshot of the <a href=\"pi-lab-live-stream\">Pi Lab Live Stream</a> every 30 minutes.</em></p>\n<p><em>I have added a Current Date/Time node to ensure that the Tweets are unique.</em></p>\n<p><em>I have downgraded the Node-Red Node to a <a href=\"https://deviwiki.com/wiki/RPF_Raspberry_Pi_3_Model_B\">Raspberry Pi 3 Model B</a> and repurpsed the original Node-Red Node into a Pi Lab Web Cluster production node.</em></p>\n</blockquote>"}}]}},"pageContext":{"slug":"node-red-twitter-bot"}},
    "staticQueryHashes": []}